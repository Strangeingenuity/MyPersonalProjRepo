"public class DynamicObjectHandler {\r\n\r\n    \\/\\/ This class acts as a controller for the DynamicObjectViewer component\r\n    \r\n    private String objType;\r\n    private List<String> accessibleFields;\r\n\r\n    public sObject obj { \r\n        get; \r\n        set {\r\n              setObjectType(value);\r\n              discoverAccessibleFields(value);\r\n              obj = reloadObjectWithAllFieldData();\r\n        } \r\n    }\r\n    \r\n    \\/\\/ The sObject type as a string\r\n    public String getObjectType() {\r\n          return(this.objType);\r\n    }\r\n    public String setObjectType(sObject newObj) {\r\n        this.objType = newObj.getSObjectType().getDescribe().getName();\r\n        return(this.objType);\r\n    }\r\n    \r\n    \\/\\/ List of accessible fields on the sObject\r\n    public List<String> getAccessibleFields() {\r\n        return(this.accessibleFields);\r\n    }\r\n    \r\n    private void discoverAccessibleFields(sObject newObj) {\r\n        this.accessibleFields = new List<String>();\r\n        Map<String, Schema.SobjectField> fields = \r\n            newObj.getSObjectType().getDescribe().fields.getMap();\r\n        for (String s : fields.keySet()) {\r\n            if ((s != 'Name') && (fields.get(s).getDescribe().isAccessible())) {\r\n                this.accessibleFields.add(s);\r\n            }\r\n        }\r\n    }\r\n    \r\n    private sObject reloadObjectWithAllFieldData() {\r\n        String qid = ApexPages.currentPage().getParameters().get('id');\r\n        String theQuery = 'SELECT ' + joinList(getAccessibleFields(), ', ') + \r\n                          ' FROM ' + getObjectType() + \r\n                          ' WHERE Id = :qid';\r\n        return(Database.query(theQuery));       \r\n    }\r\n    \r\n    \\/\\/ Join an Apex List of fields into a SELECT fields list string\r\n    private static String joinList(List<String> theList, String separator) {\r\n\r\n        if (theList == null)   { return null; }\r\n        if (separator == null) { separator = ''; }\r\n\r\n        String joined = '';\r\n        Boolean firstItem = true;\r\n        for (String item : theList) {\r\n            if(null != item) {\r\n                if(firstItem){ firstItem = false; }\r\n                else { joined += separator; }\r\n                joined += item;\r\n            }\r\n        }\r\n        return joined;\r\n    }\r\n}"